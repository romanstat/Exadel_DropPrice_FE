<div class="admin-dashboard__search">
  <app-admin-search
    (onEmitSearchTerm)="searchTermChange($event)"
    [initialValue]="searchTerm$"
  ></app-admin-search>
</div>
<section class="content">
  <section class="grid">
          <article>
            <div>
              <mat-card
                fxLayout="row"
                fxLayoutAlign="space-between center"
              >
                <mat-form-field>
                  <mat-label>{{'сортировать по рейтингу'}}</mat-label>
                  <mat-select [formControl]="ratingSort"
                  >
                    <mat-option *ngFor="let rating of sortRating$ | async " [value]="rating">
                      {{rating.includes('Asc') ? 'по возрастанию' : 'по убыванию'}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>{{'сортировать по ticket'}}</mat-label>
                  <mat-select [formControl]="ticketCountSort"
                  >
                    <mat-option *ngFor="let ticketCount of sortTicketCount$ | async" [value]="ticketCount">
                      {{ticketCount.includes('Asc') ? 'по возрастанию' : 'по убыванию'}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </mat-card>

              <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef> Name</th>
                  <td mat-cell *matCellDef="let element">
                    <a  [routerLink]="['/discounts', element.discountId]">
                      {{element.discountName}}
                    </a>
                  </td>
                </ng-container>

                <ng-container matColumnDef="rating">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Rating</th>
                  <td mat-cell *matCellDef="let element"> {{element.discountRating ? element.discountRating.toFixed(1) : '-'}} </td>
                </ng-container>

                <ng-container matColumnDef="ticketCount">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Tickets</th>
                  <td mat-cell *matCellDef="let element"> {{element.ticketCount}} </td>
                </ng-container>

    <!--            <ng-container matColumnDef="email">-->
    <!--              <th mat-header-cell *matHeaderCellDef> Email</th>-->
    <!--              <td mat-cell *matCellDef="let element"> {{element.email}} </td>-->
    <!--            </ng-container>-->

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>

              <mat-paginator [length]="resultsLength" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
            </div>
          </article>
<!--    <article>-->
<!--      <div class="example-container mat-elevation-z8">-->
<!--        <div class="example-loading-shade"-->
<!--             *ngIf="isLoadingResults || isRateLimitReached">-->
<!--          <mat-spinner *ngIf="isLoadingResults"></mat-spinner>-->
<!--          <div class="example-rate-limit-reached" *ngIf="isRateLimitReached">-->
<!--            GitHub's API rate limit has been reached. It will be reset in one minute.-->
<!--          </div>-->
<!--        </div>-->

<!--        <div class="example-table-container">-->

<!--          <table mat-table [dataSource]="data" class="example-table"-->
<!--                 matSort matSortActive="created" matSortDisableClear matSortDirection="desc">-->
<!--            &lt;!&ndash; Number Column &ndash;&gt;-->
<!--            <ng-container matColumnDef="number">-->
<!--              <th mat-header-cell *matHeaderCellDef>#</th>-->
<!--              <td mat-cell *matCellDef="let row">{{row.number}}</td>-->
<!--            </ng-container>-->

<!--            &lt;!&ndash; Title Column &ndash;&gt;-->
<!--            <ng-container matColumnDef="title">-->
<!--              <th mat-header-cell *matHeaderCellDef>Title</th>-->
<!--              <td mat-cell *matCellDef="let row">{{row.title}}</td>-->
<!--            </ng-container>-->

<!--            &lt;!&ndash; State Column &ndash;&gt;-->
<!--            <ng-container matColumnDef="state">-->
<!--              <th mat-header-cell *matHeaderCellDef>State</th>-->
<!--              <td mat-cell *matCellDef="let row">{{row.state}}</td>-->
<!--            </ng-container>-->

<!--            &lt;!&ndash; Created Column &ndash;&gt;-->
<!--            <ng-container matColumnDef="created">-->
<!--              <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>-->
<!--                Created-->
<!--              </th>-->
<!--              <td mat-cell *matCellDef="let row">{{row.created_at | date}}</td>-->
<!--            </ng-container>-->

<!--            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>-->
<!--            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>-->
<!--          </table>-->
<!--        </div>-->

<!--        <mat-paginator [length]="resultsLength" [pageSize]="30"></mat-paginator>-->
<!--      </div>-->
<!--    </article>-->
    <!--    <article></article>-->
    <!--    <article></article>-->
    <!--    <article></article>-->
    <!--    <article></article>-->
    <!--    <article></article>-->
    <!--    <article></article>-->
  </section>
</section>

