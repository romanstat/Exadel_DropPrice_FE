<div class="vendors">
  <article class="vendors-detail">
    <mat-accordion>
      <mat-expansion-panel (opened)="panelOpenState = true"
                           (closed)="panelOpenState = false">
      <mat-expansion-panel-header >
        <mat-panel-title>
          <div class="vendors-label" fxLayout="column">
            <h2 class="vendors-label__vendor-name">
              {{vendor?.vendorName}}
            </h2>

            <div class="vendors-label__rating"
                  fxLayout="row"
                  fxLayoutGap=".1em"
            >
              <span class="rating__amount" fxLayoutAlign="center center">
                {{vendor?.vendorRating ? vendor?.vendorRating.toFixed(1) : vendor?.vendorRating}}
              </span>
              <mat-icon class="rating__icon" fxLayoutAlign="center center">
                {{vendor?.vendorRating ? 'star_rate' : 'star_border'}}
              </mat-icon>
            </div>
          </div>
          <div class="vendor-content__field">
            <ul class="vendor-content__social" fxLayout="row" fxLayoutGap=" .1em">
              <li *ngFor="let social of vendor?.socialLinks">
                <a
                  href="{{social.path}}"
                  target="_blank"
                  title="{{social.name}}"
                  ngSwitch="{{social.name}}"
                >
                  <mat-icon *ngSwitchCase="'facebook'" class="social-icon">facebook</mat-icon>
                  <img *ngSwitchCase="'instagram'" src="./assets/img/instagram.svg" alt="instagram" class="social-icon">
                  <i *ngSwitchCase="'instagram'" class="fab fa-instagram"></i>
                  <mat-icon *ngSwitchDefault class="social-icon">language</mat-icon> 
                </a>
              </li>
            </ul>
          </div>
        </mat-panel-title>
        <mat-panel-description>
          <section class="vendors-detail__actions" fxLayout="column">
            <mat-icon *appVerifyUserRoles='["Moderator"]'
                    matTooltip='{{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_CONTENT.VENDOR_EDIT" | translate}}'
                    (click)="onEditVendor(vendor.vendorId)"
            >
              mode_edit
            </mat-icon>
          </section>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="vendor-content__field">
        <p class="vendor-content__field_description">
          {{vendor?.description}}
        </p>
      </div>
      <mat-divider></mat-divider>
      <div class="vendors-detail__content">
        <ul class="vendor-content">
          <li class="vendor-content__field address" fxLayout="row" fxLayoutGap=".3em" fxLayout.xs="column">
            <div class="vendor-content__field_label" fxLayout="row" fxLayout.xs="row" fxLayoutGap.xs=".3em">
              <mat-icon class="vendor-content__mat-icon">business</mat-icon>
              <p class="vendor-content__field_label-text">
                {{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_CONTENT.VENDOR_ADDRESS" | translate}}
              </p>
            </div>
            <p class="vendor-content__field_text">
              {{vendor?.address}}
            </p>
          </li>
    
          <li class="vendor-content__field" fxLayout="row" fxLayoutGap=".3em" fxLayout.xs="column" >
            <div class="vendor-content__field_label" fxLayout="row" fxLayout.xs="row">
              <mat-icon class="vendor-content__mat-icon">mail_outline</mat-icon>
              <p class="vendor-content__field_label-text">
                {{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_CONTENT.VENDOR_EMAIL" | translate}}
              </p>
            </div>
            <p class="vendor-content__field_text">
              {{vendor?.email}}
            </p>
          </li>
    
          <li class="vendor-content__field" fxLayout="row" fxLayoutGap=".3em" fxLayout.xs="column" >
            <div class="vendor-content__field_label" fxLayout="row" fxLayout.xs="row">
              <mat-icon class="vendor-content__mat-icon">phone</mat-icon>
              <p class="vendor-content__field_label-text">
                {{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_CONTENT.VENDOR_PHONE" | translate}}
              </p>
            </div>
            <p class="vendor-content__field_text">
              {{vendor?.phone}}
            </p>
          </li>
        </ul>
      </div>
      </mat-expansion-panel>
    </mat-accordion>
  </article>

  <article class="vendors-discounts">
    <app-discounts-list
      [discounts]="vendorDiscounts"
      [towns]="towns"
      (locationChange)="onLocationChange($event)"
      (getTicket)="getTicket($event)"
      (sortChange)="onSortChange($event)"
      (toggleFavourites)="changeFavourites($event)"
      [activeCoords]="activeCoords"
      [sortBy]="sortBy"
      (toggleCoordinates)="changeCoords()"
    ></app-discounts-list>
  </article>
</div>
<ng-template appRef></ng-template>
