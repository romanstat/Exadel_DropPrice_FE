<div class="vendors">
  <div class="vendors-label">
    <h2 class="vendors-label__vendor-name">
      {{vendor?.vendorName}}
    </h2>
    <div class="vendors-label__rating"
         fxLayout="row"
         fxLayoutGap=".3em"
    >
      <span class="rating__amount" fxLayoutAlign="center center">
        {{vendor?.vendorRating ? vendor?.vendorRating.toFixed(1) : vendor?.vendorRating}}
      </span>
      <mat-icon class="rating__icon" fxLayoutAlign="center center">
        {{vendor?.vendorRating ? 'star_rate' : 'star_border'}}
      </mat-icon>
    </div>
  </div>

  <article class="vendors-detail">
    <mat-accordion>
      <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Подробнее о вендоре
          </mat-panel-title>
        </mat-expansion-panel-header>
        <p class="vendor-content__field_text">
          {{vendor?.description}}
        </p>
        <mat-divider></mat-divider>
        <li class="vendor-content__field" fxLayout="row" fxLayoutGap=" .3em">
          <mat-icon class="vendor-content__mat-icon">business</mat-icon>
          <p class="vendor-content__field_label">
            {{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_CONTENT.VENDOR_ADDRESS" | translate}}
          </p>
          <p class="vendor-content__field_text">
            {{vendor?.address}}
          </p>
        </li>

        <li class="vendor-content__field" fxLayout="row" fxLayoutGap=" .3em">
          <mat-icon class="vendor-content__mat-icon">mail_outline</mat-icon>
          <p class="vendor-content__field_label">
            {{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_CONTENT.VENDOR_EMAIL" | translate}}
          </p>
          <p class="vendor-content__field_text">
            {{vendor?.email}}
          </p>
        </li>

        <li class="vendor-content__field" fxLayout="row" fxLayoutGap=" .3em">
          <mat-icon class="vendor-content__mat-icon">phone</mat-icon>
          <p class="vendor-content__field_label">
            {{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_CONTENT.VENDOR_PHONE" | translate}}
          </p>
          <p class="vendor-content__field_text">
            {{vendor?.phone}}
          </p>
        </li>
      </mat-expansion-panel>
    </mat-accordion>

    <section class="vendors-detail__content">
      <ul class="vendor-content">
        <li class="vendor-content__field">
          <p class="vendor-content__field_text">
            {{vendor?.description}}
          </p>
        </li>
        
        <mat-divider></mat-divider>
        <li class="vendor-content__field" fxLayout="row" fxLayoutGap=" .3em">
          <mat-icon class="vendor-content__mat-icon">business</mat-icon>
          <p class="vendor-content__field_label">
            {{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_CONTENT.VENDOR_ADDRESS" | translate}}
          </p>
          <p class="vendor-content__field_text">
            {{vendor?.address}}
          </p>
        </li>

        <li class="vendor-content__field" fxLayout="row" fxLayoutGap=" .3em">
          <mat-icon class="vendor-content__mat-icon">mail_outline</mat-icon>
          <p class="vendor-content__field_label">
            {{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_CONTENT.VENDOR_EMAIL" | translate}}
          </p>
          <p class="vendor-content__field_text">
            {{vendor?.email}}
          </p>
        </li>

        <li class="vendor-content__field" fxLayout="row" fxLayoutGap=" .3em">
          <mat-icon class="vendor-content__mat-icon">phone</mat-icon>
          <p class="vendor-content__field_label">
            {{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_CONTENT.VENDOR_PHONE" | translate}}
          </p>
          <p class="vendor-content__field_text">
            {{vendor?.phone}}
          </p>
        </li>

        <div class="vendor-content__field">
          <ul class="vendor-content__field_text" fxLayout="row" fxLayoutGap=" .3em">
            <li *ngFor="let social of vendor?.socialLinks">
              <a
                href="{{social.path}}"
                target="_blank"
                title="{{social.name}}"
                ngSwitch="{{social.name}}"
              >
              <img *ngSwitchCase="'instagram'" src="./assets/img/instagram.svg" alt="instagram" class="social-icon">
              <img *ngSwitchCase="'facebook'" src="./assets/img/facebook.svg" alt="facebook" class="social-icon">
              <img *ngSwitchDefault src="./assets/img/website.svg" alt="website" class="social-icon">
              </a>
            </li>
          </ul>
        </div>
      </ul>
    </section>

    <section class="vendors-detail__actions">
      <button *appVerifyUserRoles='["Moderator"]'
              class="vendors-detail__actions_button"
              mat-flat-button
              matTooltip="Edit Discount"
              (click)="onEditVendor(vendor.vendorId)"
      >
        {{"VENDOR_PAGE.VENDOR_DETAIL.DETAIL_ACTIONS.EDIT" | translate}}
      </button>
    </section>
  </article>

  <article class="vendors-discounts">
    <app-discounts-list
      [discounts]="vendorDiscounts"
      [towns]="towns"
      (locationChange)="onLocationChange($event)"
      (getTicket)="getTicket($event)"
      (sortChange)="onSortChange($event)"
      (toggleFavourites)="changeFavourites($event)"
      [activeCoords]="activeCoords"
      [sortBy]="sortBy"
      (toggleCoordinates)="changeCoords()"
    ></app-discounts-list>
  </article>
</div>
<ng-template appRef></ng-template>
